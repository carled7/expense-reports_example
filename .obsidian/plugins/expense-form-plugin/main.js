/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);

// form.ts
var personalFinanceReportExample = [
  {
    type: "date" /* DATE */,
    name: "Date",
    description: "Enter expense date",
    className: "date",
    content: { expression: '{{new Date().toISOString().split("T")[0]}}' }
  },
  {
    type: "time" /* TIME */,
    name: "Time",
    description: "Enter expense time",
    className: "time",
    content: {
      expression: "{{`${new Date().getHours()}:${new Date().getMinutes()}`}}"
    }
  },
  {
    type: "dropdown" /* DROPDOWN */,
    name: "Category",
    className: "category",
    description: "Select expense category",
    content: {},
    options: { expression: "{{%%expenses-dictionary.md%%.categories}}" }
  },
  {
    type: "dropdown" /* DROPDOWN */,
    name: "Sub-Category",
    className: "sub-category",
    description: "Select expense sub-category",
    content: {},
    options: {
      expression: "{{%%expenses-dictionary.md%%[$$.category]}}"
    }
  },
  {
    type: "number" /* NUMBER */,
    name: "Cost",
    className: "cost",
    description: "Enter how much it cost",
    placeholder: "0.00",
    content: {}
  },
  {
    type: "dropdown" /* DROPDOWN */,
    name: "Origin",
    description: "Select expense payment origin",
    className: "origin",
    content: {},
    options: { expression: "{{%%expenses-dictionary.md%%.origin}}" }
  },
  {
    type: "dropdown" /* DROPDOWN */,
    name: "Payment type",
    description: "Select expense payment type",
    className: "payment-type",
    content: {},
    options: {
      expression: '{{%%expenses-dictionary.md%%[`${$$.origin === "Voucher" ? "voucher" : "payment-type"}`]}}'
    }
  },
  {
    type: "text" /* TEXT */,
    name: "Bougth at",
    description: "Enter where it was spent",
    className: "bought-at",
    placeholder: "Seller`s name",
    content: {},
    options: { expression: "{{%%expenses-dictionary.md%%.city}}" }
  },
  {
    type: "dropdown" /* DROPDOWN */,
    name: "City",
    description: "Select where it was spent",
    className: "city",
    content: {},
    options: { expression: "{{%%expenses-dictionary.md%%.city}}" }
  },
  {
    type: "text" /* TEXT */,
    name: "Description",
    description: "Enter expense description",
    placeholder: "Expense description",
    className: "description",
    content: {}
  },
  {
    type: "text" /* TEXT */,
    name: "Grouping Tag",
    description: "Add tag to semantic grouping",
    placeholder: "#semanticTag",
    className: "grouping-tag",
    content: {}
  }
];
var formFieldExamples = [
  {
    type: "text" /* TEXT */,
    name: "Field 01",
    description: "first field",
    className: "field01",
    content: { expression: "{{%%expenses/1716155614454.md%%.category}}" }
    // options: { a: "a", b: "b" },
  },
  {
    type: "text" /* TEXT */,
    name: "Field 02",
    description: "second field",
    className: "field02",
    content: {
      expression: "{{%%expenses/1716155633804.md%%.category + ' ' + $$.field01}}"
    }
  },
  {
    type: "text" /* TEXT */,
    name: "Field 03",
    description: "third field",
    className: "field03",
    content: { expression: "{{$$.field02}}" }
  },
  {
    type: "number" /* NUMBER */,
    name: "Field 00",
    description: "cost field",
    className: "costfield",
    content: {}
  },
  {
    type: "dropdown" /* DROPDOWN */,
    name: "Field 04",
    description: "forth field",
    className: "field04",
    content: { expression: "{{$$.field03}}" },
    options: { value: ["a", "b"] }
  },
  {
    type: "dropdown" /* DROPDOWN */,
    name: "Field 05",
    description: "fifth field",
    className: "field05",
    content: { expression: "{{$$.field02}}" },
    options: {
      expression: "{{Object.values(%%my props.md%%).map(i => i.toUpperCase())}}"
    }
  }
];

// form-field.factory.ts
var import_obsidian = require("obsidian");

// utils.ts
function getClassNamesFromExpression(expression) {
  const classNameMatcher = new RegExp(/\$\$\.([0-9a-zA-Z-\-]+)/, "g");
  let matches = void 0;
  const formFieldClassNames = [];
  while ((matches = classNameMatcher.exec(expression)) !== null)
    formFieldClassNames.push(matches[1]);
  return formFieldClassNames;
}
function getFilePathsFromExpression(expression) {
  const filePathMatcher = new RegExp(/%%([^%%]*)%%/, "g");
  let matches = void 0;
  const filePaths = [];
  while ((matches = filePathMatcher.exec(expression)) !== null)
    filePaths.push(matches[1]);
  return filePaths;
}
function fromArrayToRecord(array) {
  if (!array)
    return {};
  const record = {};
  array.map((item) => {
    record[item] = item;
  });
  return record;
}

// form-field.factory.ts
var FormFieldFactory = class {
  constructor(params) {
    this.contentEl = params.contentEl;
    this.app = params.app;
    this.formField = params.formField;
    this.expressionContext = params == null ? void 0 : params.expressionContext;
    this.formField.state = "created" /* CREATED */;
  }
  set dependents(dependents) {
    this.dependentFields = dependents;
  }
  async initialiseFormField(dependents) {
    this.formField.setting = this.getSetting();
    await this.assignDefaultValue();
    this.dependents = dependents;
    this.formField.state = "initialized" /* INITIALIZED */;
  }
  async assignDefaultValue() {
    await this.assignValue();
  }
  async updateField(value, updatedBy) {
    var _a;
    //new import_obsidian.Notice(`${this.formField.className} changed: ${value}`);
    await this.assignValue(value, updatedBy);
    await Promise.all(
      (_a = this.dependentFields) == null ? void 0 : _a.map(
        (dependent) => dependent.updateField(void 0, this.formField.className)
      )
    );
  }
  async assignValue(value, updatedBy) {
    var _a;
    const valueToAssing = value ? value : await this.evaluateExpression(
      (_a = this.formField.content) == null ? void 0 : _a.expression,
      this.expressionContext
    );
    if (valueToAssing === this.formField.content.value)
      return;
    this.value = valueToAssing;
  }
  assignFormFieldAttributes(setting) {
    var _a;
    const htmlEl = this.contentEl.querySelector(
      this.getFormFieldHtmlPath()
    );
    htmlEl == null ? void 0 : htmlEl.setAttribute("type", this.formField.type);
    if (this.formField.placeholder)
      htmlEl == null ? void 0 : htmlEl.setAttribute("placeholder", (_a = this.formField) == null ? void 0 : _a.placeholder);
    if (this.formField.description)
      setting.setDesc(this.formField.description);
  }
  getFormFieldHtmlPath(formField = this.formField) {
    return `div.${formField.className} > div.setting-item-control > input`;
  }
  async evaluateExpression(expression, expressionContext) {
    if (!this.formField.content.expression)
      return "";
    const [prefix, expressionToEvaluate, sufix] = expression ? this.splitExpression(expression) : ["", "", ""];
    if (!expressionToEvaluate)
      return prefix;
    const parsedExpression = await this.parseExpressionContext(
      expressionToEvaluate,
      expressionContext
    );
    try {
      const expressionResult = new Function(
        `return ${parsedExpression};`
      )();
      return `${prefix}${expressionResult}${sufix != null ? sufix : ""}`;
    } catch (error) {
      new import_obsidian.Notice(
        `Error on evaluating ${this.formField.className} expression`
      );
      console.error(error);
      return `${prefix}${sufix != null ? sufix : ""}`;
    }
  }
  splitExpression(expression) {
    var _a;
    if (!(expression.includes("{{") && expression.includes("}}")))
      return [expression];
    const expressionMatcher = new RegExp(/{{(.*)}}/);
    const expressionToEvaluate = (_a = expressionMatcher.exec(expression)) == null ? void 0 : _a.at(0);
    const prefix = expression.split("{{")[0];
    const sufix = expression.split("}}")[1];
    return [prefix, expressionToEvaluate != null ? expressionToEvaluate : "", sufix];
  }
  async parseExpressionContext(expression, expressionContext) {
    var _a, _b;
    const formFieldClassNames = getClassNamesFromExpression(expression);
    formFieldClassNames.forEach((formFieldClassName) => {
      var _a2, _b2, _c, _d, _e, _f;
      const formField = expressionContext == null ? void 0 : expressionContext.find(
        (formField2) => formField2.formField.className === formFieldClassName
      );
      const classNameMatcher = new RegExp(
        `\\$\\$\\.${formField == null ? void 0 : formField.formField.className}`
      );
      const isFilePath = new RegExp(
        `%%.*\\$\\$\\.${formField == null ? void 0 : formField.formField.className}.*%%`,
        "g"
      );
      const valueTeReplace = isFilePath.test(expression) ? `${(_c = (_b2 = (_a2 = formField == null ? void 0 : formField.formField) == null ? void 0 : _a2.content) == null ? void 0 : _b2.value) != null ? _c : ""}` : `'${(_f = (_e = (_d = formField == null ? void 0 : formField.formField) == null ? void 0 : _d.content) == null ? void 0 : _e.value) != null ? _f : ""}'`;
      expression = expression.replace(classNameMatcher, valueTeReplace);
    });
    const filePaths = getFilePathsFromExpression(expression);
    await Promise.all(
      filePaths.map(async (filePath) => {
        const filePathMatcher = new RegExp(`%%${filePath}%%`);
        const [_, fileExtension] = filePath.split(".");
        if (fileExtension !== "md") {
          new import_obsidian.Notice(
            `Can't handle .${fileExtension} extension, .md expected`
          );
          expression = expression.replace(filePathMatcher, "");
        }
        const file = this.app.vault.getFileByPath(filePath);
        if (!file)
          return;
        let fileFrontMatter = "";
        await this.app.fileManager.processFrontMatter(
          file,
          (frontmatter) => fileFrontMatter = frontmatter
        );
        expression = expression.replace(
          filePathMatcher,
          JSON.stringify(fileFrontMatter)
        );
      })
    );
    const expressionContentMatcher = new RegExp(/{{(.*)}}/);
    return (_b = (_a = expressionContentMatcher.exec(expression)) == null ? void 0 : _a.at(-1)) != null ? _b : "";
  }
};
var TextFormFieldFactory = class extends FormFieldFactory {
  constructor(params) {
    super(params);
  }
  getSetting() {
    const setting = new import_obsidian.Setting(this.contentEl).setName(this.formField.name).setClass(this.formField.className).addText((text) => text.onChange(this.updateField.bind(this)));
    this.assignFormFieldAttributes(setting);
    return setting;
  }
  set value(valueToSet) {
    const fieldEl = this.contentEl.querySelector(
      this.getFormFieldHtmlPath()
    );
    if (fieldEl instanceof HTMLInputElement) {
      fieldEl.value = valueToSet;
      this.formField.content["value"] = valueToSet;
    } else
      new import_obsidian.Notice(
        `Can't find field element: ${this.getFormFieldHtmlPath()}`
      );
  }
};
var TimeFormFieldFactory = class extends TextFormFieldFactory {
  async assignValue(value, updatedBy) {
    var _a;
    let valueToAssing = value ? value : await this.evaluateExpression(
      (_a = this.formField.content) == null ? void 0 : _a.expression,
      this.expressionContext
    );
    let [hour, minute] = valueToAssing.split(":");
    if (!hour || !minute) {
      new import_obsidian.Notice(`Unexpected format for time field. Expected is HH:mm`);
      return;
    }
    hour = hour.length === 2 ? hour : `0${hour}`;
    minute = minute.length === 2 ? minute : `0${minute}`;
    valueToAssing = `${hour}:${minute}`;
    if (valueToAssing === this.formField.content.value)
      return;
    this.value = valueToAssing;
  }
};
var DropdownFormFieldFactory = class extends FormFieldFactory {
  constructor(params) {
    super(params);
    this.optionExpressionContext = params.optionExpressionContext;
  }
  getSetting() {
    const options = fromArrayToRecord(this.formField.options.value);
    const setting = new import_obsidian.Setting(this.contentEl).setName(this.formField.name).setClass(this.formField.className).addDropdown(
      (dropdown) => dropdown.addOptions(options).onChange(this.updateField.bind(this))
    );
    this.assignFormFieldAttributes(setting);
    return setting;
  }
  set value(valueToSet) {
    const fieldEl = this.contentEl.querySelector(
      this.getFormFieldHtmlPath()
    );
    if (fieldEl instanceof HTMLSelectElement) {
      fieldEl.value = valueToSet;
      this.formField.content["value"] = valueToSet;
    } else
      new import_obsidian.Notice(
        `Can't find field element: ${this.getFormFieldHtmlPath()}`
      );
  }
  getFormFieldHtmlPath(formField = this.formField) {
    return `div.${formField.className} > div.setting-item-control > select`;
  }
  async resolveDropdownOptions(updatedBy = this.formField.className) {
    var _a;
    const expressionToEvaluate = (_a = this.formField.options) == null ? void 0 : _a.expression;
    if (!expressionToEvaluate || this.formField.state === "initialized" /* INITIALIZED */ && !expressionToEvaluate.includes(updatedBy))
      return;
    const parsedExpression = await this.parseExpressionContext(
      expressionToEvaluate,
      this.optionExpressionContext
    );
    try {
      const newOptions = new Function(
        `return ${parsedExpression};`
      )();
      this.addNewOptions.bind(this)(newOptions, updatedBy, false, true);
    } catch (error) {
      new import_obsidian.Notice(
        `error on evaluating ${this.formField.className} option expression`
      );
      console.error(error);
    }
  }
  async assignValue(value, updatedBy) {
    var _a, _b;
    await this.resolveDropdownOptions(updatedBy);
    const valueToAssing = value ? value : await this.evaluateExpression(
      this.formField.content.expression,
      this.expressionContext
    ) || Object.values((_b = (_a = this.formField.options) == null ? void 0 : _a.value) != null ? _b : {})[0];
    if (valueToAssing === this.formField.content.value || valueToAssing === "")
      return;
    if (this.formField.options.value && !Object.values(this.formField.options.value).includes(valueToAssing))
      this.addNewOptions([valueToAssing], updatedBy, !!updatedBy);
    this.value = valueToAssing;
  }
  addNewOptions(newOptions, updatedBy = this.formField.className, keepOnlyOneByUpdatedField = true, removeOldOptions = false) {
    if (!newOptions.length)
      return;
    const formFieldHtmlPath = this.getFormFieldHtmlPath();
    const fieldEl = this.contentEl.querySelector(
      this.getFormFieldHtmlPath()
    );
    if (!fieldEl)
      return;
    if (removeOldOptions) {
      fieldEl.innerHTML = "";
      this.formField.options.value = newOptions;
    }
    newOptions.forEach((newOption) => {
      var _a;
      const postAddedOption = keepOnlyOneByUpdatedField ? (_a = this.contentEl) == null ? void 0 : _a.querySelector(
        `${formFieldHtmlPath} > option.${updatedBy}`
      ) : void 0;
      if (postAddedOption && keepOnlyOneByUpdatedField)
        fieldEl.removeChild(postAddedOption);
      fieldEl.createEl("option", {
        value: newOption,
        text: newOption
      }).setAttr("class", updatedBy);
      this.formField.options.value = this.formField.options.value ? [...this.formField.options.value, newOption] : [newOption];
    });
  }
};
var Form = class {
  constructor(contentEl, app, formFields) {
    this.formFieldFactories = [];
    this.contentEl = contentEl;
    this.app = app;
    this.formFields = formFields;
  }
  async createFormFields() {
    this.formFields.forEach((formField) => {
      var _a;
      if (formField.setting)
        formField.setting.clear();
      const factoryParams = {
        formField,
        app: this.app,
        contentEl: this.contentEl,
        expressionContext: this.getExpressionContext(
          (_a = formField.content) == null ? void 0 : _a.expression
        )
      };
      switch (formField.type) {
        case "text" /* TEXT */:
        case "date" /* DATE */:
        case "number" /* NUMBER */:
          this.formFieldFactories.push(
            new TextFormFieldFactory(factoryParams)
          );
          break;
        case "time" /* TIME */:
          this.formFieldFactories.push(
            new TimeFormFieldFactory(factoryParams)
          );
          break;
        case "dropdown" /* DROPDOWN */:
          this.formFieldFactories.push(
            new DropdownFormFieldFactory({
              optionExpressionContext: this.getExpressionContext(
                formField.options.expression
              ),
              ...factoryParams
            })
          );
          break;
      }
    });
    for (const factory of this.formFieldFactories) {
      await factory.initialiseFormField(
        this.getDependentFields(
          factory.formField.className,
          this.formFieldFactories
        )
      );
    }
  }
  getDependentFields(fieldClassName, formFieldFactories) {
    return formFieldFactories.filter(
      (factory) => {
        var _a, _b, _c, _d;
        return ((_b = (_a = factory.formField.content) == null ? void 0 : _a.expression) == null ? void 0 : _b.includes(
          `$$.${fieldClassName}`
        )) || ((_d = (_c = factory.formField.options) == null ? void 0 : _c.expression) == null ? void 0 : _d.includes(`$$.${fieldClassName}`));
      }
    );
  }
  getExpressionContext(expression) {
    const expressionContext = [];
    if (!expression)
      return expressionContext;
    const formFieldClassNames = getClassNamesFromExpression(expression);
    formFieldClassNames.forEach((formFieldClassName) => {
      const partialContext = this.formFieldFactories.find(
        (formFieldFactory) => formFieldFactory.formField.className === formFieldClassName
      );
      if (partialContext)
        expressionContext.push(partialContext);
    });
    return expressionContext;
  }
  getDataAsFrontmatter() {
    let frontmatterString = "";
    this.formFieldFactories.map((factory) => {
      var _a, _b, _c;
      const stringValue = factory.formField.type === "dropdown" /* DROPDOWN */ || factory.formField.type === "text" /* TEXT */ ? `"${(_b = (_a = factory.formField.content) == null ? void 0 : _a.value) != null ? _b : ""}"` : (_c = factory.formField.content) == null ? void 0 : _c.value;
      frontmatterString += `${factory.formField.className}: ${stringValue}
`;
    });
    return `---
${frontmatterString}---`;
  }
  getTimestampNamingStrategy() {
    var _a, _b;
    const date = (_a = this.formFieldFactories.find(
      (factory) => factory.formField.className === "date"
    )) == null ? void 0 : _a.formField.content.value;
    const time = (_b = this.formFieldFactories.find(
      (factory) => factory.formField.className === "time"
    )) == null ? void 0 : _b.formField.content.value;
    const expenseTime = new Date(`${date} ${time}`).getTime();
    const currentMilliseconds = new Date().getMilliseconds();
    return expenseTime + currentMilliseconds;
  }
  setFormDataNull() {
    this.formFieldFactories.forEach(
      (factory) => factory.formField.content.value = void 0
    );
  }
};

// main.ts
var import_obsidian2 = require("obsidian");
var DEFAULT_SETTINGS = {
  mySetting: "default"
};
var MyPlugin = class extends import_obsidian2.Plugin {
  async onload() {
    await this.saveSettings();
    await this.loadSettings();
    const ribbonIconEl = this.addRibbonIcon(
      "wallet",
      "Report expense",
      (evt) => {
        new SampleModal(this.app, personalFinanceReportExample).open();
      }
    );
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(formFieldExamples);
  }
};
var SampleModal = class extends import_obsidian2.Modal {
  constructor(app, formFields) {
    super(app);
    this.app = app;
    this.form = new Form(this.contentEl, this.app, formFields);
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Report expense" });
    await this.form.createFormFields();
    new import_obsidian2.Setting(this.contentEl).addButton(
      (button) => button.setButtonText("Save expense").setCta().onClick(() => {
        const frontmatterProps = this.form.getDataAsFrontmatter();
        const formInputTimestamp = this.form.getTimestampNamingStrategy();
        this.close();
        this.app.vault.create(
          `expenses/${formInputTimestamp}.md`,
          frontmatterProps
        );
      })
    );
  }
  onClose() {
    this.form.setFormDataNull();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJmb3JtLnRzIiwgImZvcm0tZmllbGQuZmFjdG9yeS50cyIsICJ1dGlscy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcblx0Rm9ybUZpZWxkLFxuXHRmb3JtRmllbGRFeGFtcGxlcyxcblx0cGVyc29uYWxGaW5hbmNlUmVwb3J0RXhhbXBsZSxcbn0gZnJvbSBcImZvcm1cIjtcbmltcG9ydCB7IEZvcm0gfSBmcm9tIFwiZm9ybS1maWVsZC5mYWN0b3J5XCI7XG5pbXBvcnQge1xuXHRBcHAsXG5cdE1vZGFsLFxuXHROb3RpY2UsXG5cdFBsdWdpbixcblx0UGx1Z2luU2V0dGluZ1RhYixcblx0U2V0dGluZyxcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxuXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XG5cdG15U2V0dGluZzogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVBsdWdpblNldHRpbmdzID0ge1xuXHRteVNldHRpbmc6IFwiZGVmYXVsdFwiLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncztcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0Ly8gVGhpcyBjcmVhdGVzIGFuIGljb24gaW4gdGhlIGxlZnQgcmliYm9uLlxuXHRcdGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbihcblx0XHRcdFwid2FsbGV0XCIsXG5cdFx0XHRcIlJlcG9ydCBleHBlbnNlXCIsXG5cdFx0XHQoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRcdC8vIENhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgaWNvbi5cblx0XHRcdFx0bmV3IFNhbXBsZU1vZGFsKHRoaXMuYXBwLCBwZXJzb25hbEZpbmFuY2VSZXBvcnRFeGFtcGxlKS5vcGVuKCk7XG5cdFx0XHR9XG5cdFx0KTtcblx0fVxuXG5cdG9udW5sb2FkKCkge31cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXG5cdFx0XHR7fSxcblx0XHRcdERFRkFVTFRfU0VUVElOR1MsXG5cdFx0XHRhd2FpdCB0aGlzLmxvYWREYXRhKClcblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEoZm9ybUZpZWxkRXhhbXBsZXMpO1xuXHR9XG59XG5cbmNsYXNzIFNhbXBsZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRwdWJsaWMgYXBwOiBBcHA7XG5cdHByaXZhdGUgZm9ybTogRm9ybTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZm9ybUZpZWxkczogRm9ybUZpZWxkW10pIHtcblx0XHRzdXBlcihhcHApO1xuXG5cdFx0dGhpcy5hcHAgPSBhcHA7XG5cdFx0dGhpcy5mb3JtID0gbmV3IEZvcm0odGhpcy5jb250ZW50RWwsIHRoaXMuYXBwLCBmb3JtRmllbGRzKTtcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiUmVwb3J0IGV4cGVuc2VcIiB9KTtcblxuXHRcdGF3YWl0IHRoaXMuZm9ybS5jcmVhdGVGb3JtRmllbGRzKCk7XG5cblx0XHRuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbCkuYWRkQnV0dG9uKChidXR0b24pID0+XG5cdFx0XHRidXR0b25cblx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJTYXZlIGV4cGVuc2VcIilcblx0XHRcdFx0LnNldEN0YSgpXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlclByb3BzID0gdGhpcy5mb3JtLmdldERhdGFBc0Zyb250bWF0dGVyKCk7XG5cdFx0XHRcdFx0Y29uc3QgZm9ybUlucHV0VGltZXN0YW1wID0gdGhpcy5mb3JtLmdldFRpbWVzdGFtcE5hbWluZ1N0cmF0ZWd5KCk7XG5cdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXG5cdFx0XHRcdFx0dGhpcy5hcHAudmF1bHQuY3JlYXRlKFxuXHRcdFx0XHRcdFx0YGV4cGVuc2VzLyR7Zm9ybUlucHV0VGltZXN0YW1wfS5tZGAsXG5cdFx0XHRcdFx0XHRmcm9udG1hdHRlclByb3BzXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fSlcblx0XHQpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHR0aGlzLmZvcm0uc2V0Rm9ybURhdGFOdWxsKCk7XG5cdH1cbn1cblxuY2xhc3MgU2FtcGxlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IE15UGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15UGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJTZXR0aW5nICMxXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkl0J3MgYSBzZWNyZXRcIilcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgeW91ciBzZWNyZXRcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBlbnVtIEZPUk1fRklFTERfRUxFTUVOVF9UWVBFIHtcblx0VEVYVCA9IFwidGV4dFwiLFxuXHREQVRFID0gXCJkYXRlXCIsXG5cdFRJTUUgPSBcInRpbWVcIixcblx0RFJPUERPV04gPSBcImRyb3Bkb3duXCIsXG5cdE5VTUJFUiA9IFwibnVtYmVyXCIsXG59XG5cbmV4cG9ydCBlbnVtIEZPUk1fRklFTERfU1RBVEUge1xuXHRJTklUSUFMSVpFRCA9IFwiaW5pdGlhbGl6ZWRcIixcblx0Q1JFQVRFRCA9IFwiY3JlYXRlZFwiLFxufVxuXG5jbGFzcyBGb3JtRmllbGRDb250ZW50IHtcblx0ZXhwcmVzc2lvbj86IHN0cmluZztcblx0dmFsdWU/OiBzdHJpbmc7XG59XG5cbmNsYXNzIEJhc2VGb3JtRmllbGQge1xuXHRzdGF0ZT86IEZPUk1fRklFTERfU1RBVEU7XG5cdG5hbWU6IHN0cmluZztcblx0Y2xhc3NOYW1lOiBzdHJpbmc7XG5cdHR5cGU6IEZPUk1fRklFTERfRUxFTUVOVF9UWVBFO1xuXHRkZXNjcmlwdGlvbj86IHN0cmluZztcblx0cGxhY2Vob2xkZXI/OiBzdHJpbmc7XG5cdGNvbnRlbnQ6IEZvcm1GaWVsZENvbnRlbnQ7XG5cdHNldHRpbmc/OiBTZXR0aW5nO1xufVxuXG5leHBvcnQgY2xhc3MgVGV4dEZvcm1GaWVsZEZpZWxkIGV4dGVuZHMgQmFzZUZvcm1GaWVsZCB7XG5cdHR5cGUgPSBGT1JNX0ZJRUxEX0VMRU1FTlRfVFlQRS5URVhUO1xufVxuXG5leHBvcnQgY2xhc3MgRGF0ZUZvcm1GaWVsZEZpZWxkIGV4dGVuZHMgQmFzZUZvcm1GaWVsZCB7XG5cdHR5cGUgPSBGT1JNX0ZJRUxEX0VMRU1FTlRfVFlQRS5EQVRFO1xufVxuXG5leHBvcnQgY2xhc3MgVGltZUZvcm1GaWVsZEZpZWxkIGV4dGVuZHMgQmFzZUZvcm1GaWVsZCB7XG5cdHR5cGUgPSBGT1JNX0ZJRUxEX0VMRU1FTlRfVFlQRS5USU1FO1xufVxuXG5jbGFzcyBEcm9wZG93bk9wdGlvbnMge1xuXHR2YWx1ZT86IHN0cmluZ1tdO1xuXHRleHByZXNzaW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgRHJvcGRvd25Gb3JtRmllbGQgZXh0ZW5kcyBCYXNlRm9ybUZpZWxkIHtcblx0dHlwZSA9IEZPUk1fRklFTERfRUxFTUVOVF9UWVBFLkRST1BET1dOO1xuXHRvcHRpb25zOiBEcm9wZG93bk9wdGlvbnM7XG59XG5cbmV4cG9ydCB0eXBlIEZvcm1GaWVsZCA9XG5cdHwgVGV4dEZvcm1GaWVsZEZpZWxkXG5cdHwgRGF0ZUZvcm1GaWVsZEZpZWxkXG5cdHwgVGltZUZvcm1GaWVsZEZpZWxkXG5cdHwgRHJvcGRvd25Gb3JtRmllbGQ7XG5cbmV4cG9ydCBjb25zdCBwZXJzb25hbEZpbmFuY2VSZXBvcnRFeGFtcGxlOiBGb3JtRmllbGRbXSA9IFtcblx0e1xuXHRcdHR5cGU6IEZPUk1fRklFTERfRUxFTUVOVF9UWVBFLkRBVEUsXG5cdFx0bmFtZTogXCJEYXRlXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiRW50ZXIgZXhwZW5zZSBkYXRlXCIsXG5cdFx0Y2xhc3NOYW1lOiBcImRhdGVcIixcblx0XHRjb250ZW50OiB7IGV4cHJlc3Npb246ICd7e25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF19fScgfSxcblx0fSxcblx0e1xuXHRcdHR5cGU6IEZPUk1fRklFTERfRUxFTUVOVF9UWVBFLlRJTUUsXG5cdFx0bmFtZTogXCJUaW1lXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiRW50ZXIgZXhwZW5zZSB0aW1lXCIsXG5cdFx0Y2xhc3NOYW1lOiBcInRpbWVcIixcblx0XHRjb250ZW50OiB7XG5cdFx0XHRleHByZXNzaW9uOlxuXHRcdFx0XHRcInt7YCR7bmV3IERhdGUoKS5nZXRIb3VycygpfToke25ldyBEYXRlKCkuZ2V0TWludXRlcygpfWB9fVwiLFxuXHRcdH0sXG5cdH0sXG5cdHtcblx0XHR0eXBlOiBGT1JNX0ZJRUxEX0VMRU1FTlRfVFlQRS5EUk9QRE9XTixcblx0XHRuYW1lOiBcIkNhdGVnb3J5XCIsXG5cdFx0Y2xhc3NOYW1lOiBcImNhdGVnb3J5XCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiU2VsZWN0IGV4cGVuc2UgY2F0ZWdvcnlcIixcblx0XHRjb250ZW50OiB7fSxcblx0XHRvcHRpb25zOiB7IGV4cHJlc3Npb246IFwie3slJWV4cGVuc2VzLWRpY3Rpb25hcnkubWQlJS5jYXRlZ29yaWVzfX1cIiB9LFxuXHR9LFxuXHR7XG5cdFx0dHlwZTogRk9STV9GSUVMRF9FTEVNRU5UX1RZUEUuRFJPUERPV04sXG5cdFx0bmFtZTogXCJTdWItQ2F0ZWdvcnlcIixcblx0XHRjbGFzc05hbWU6IFwic3ViLWNhdGVnb3J5XCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiU2VsZWN0IGV4cGVuc2Ugc3ViLWNhdGVnb3J5XCIsXG5cdFx0Y29udGVudDoge30sXG5cdFx0b3B0aW9uczoge1xuXHRcdFx0ZXhwcmVzc2lvbjogXCJ7eyUlZXhwZW5zZXMtZGljdGlvbmFyeS5tZCUlWyQkLmNhdGVnb3J5XX19XCIsXG5cdFx0fSxcblx0fSxcblx0e1xuXHRcdHR5cGU6IEZPUk1fRklFTERfRUxFTUVOVF9UWVBFLk5VTUJFUixcblx0XHRuYW1lOiBcIkNvc3RcIixcblx0XHRjbGFzc05hbWU6IFwiY29zdFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIkVudGVyIGhvdyBtdWNoIGl0IGNvc3RcIixcblx0XHRwbGFjZWhvbGRlcjogJzAuMDAnLFxuXHRcdGNvbnRlbnQ6IHt9LFxuXHR9LFxuXHR7XG5cdFx0dHlwZTogRk9STV9GSUVMRF9FTEVNRU5UX1RZUEUuRFJPUERPV04sXG5cdFx0bmFtZTogXCJPcmlnaW5cIixcblx0XHRkZXNjcmlwdGlvbjogXCJTZWxlY3QgZXhwZW5zZSBwYXltZW50IG9yaWdpblwiLFxuXHRcdGNsYXNzTmFtZTogXCJvcmlnaW5cIixcblx0XHRjb250ZW50OiB7fSxcblx0XHRvcHRpb25zOiB7IGV4cHJlc3Npb246IFwie3slJWV4cGVuc2VzLWRpY3Rpb25hcnkubWQlJS5vcmlnaW59fVwiIH0sXG5cdH0sXG5cdHtcblx0XHR0eXBlOiBGT1JNX0ZJRUxEX0VMRU1FTlRfVFlQRS5EUk9QRE9XTixcblx0XHRuYW1lOiBcIlBheW1lbnQgdHlwZVwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlNlbGVjdCBleHBlbnNlIHBheW1lbnQgdHlwZVwiLFxuXHRcdGNsYXNzTmFtZTogXCJwYXltZW50LXR5cGVcIixcblx0XHRjb250ZW50OiB7fSxcblx0XHRvcHRpb25zOiB7XG5cdFx0XHRleHByZXNzaW9uOlxuXHRcdFx0XHQne3slJWV4cGVuc2VzLWRpY3Rpb25hcnkubWQlJVtgJHskJC5vcmlnaW4gPT09IFwiVm91Y2hlclwiID8gXCJ2b3VjaGVyXCIgOiBcInBheW1lbnQtdHlwZVwifWBdfX0nLFxuXHRcdH0sXG5cdH0sXG5cdHtcblx0XHR0eXBlOiBGT1JNX0ZJRUxEX0VMRU1FTlRfVFlQRS5URVhULFxuXHRcdG5hbWU6IFwiQm91Z3RoIGF0XCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiRW50ZXIgd2hlcmUgaXQgd2FzIHNwZW50XCIsXG5cdFx0Y2xhc3NOYW1lOiAnYm91Z2h0LWF0Jyxcblx0XHRwbGFjZWhvbGRlcjogXCJTZWxsZXJgcyBuYW1lXCIsXG5cdFx0Y29udGVudDoge30sXG5cdFx0b3B0aW9uczogeyBleHByZXNzaW9uOiBcInt7JSVleHBlbnNlcy1kaWN0aW9uYXJ5Lm1kJSUuY2l0eX19XCIgfSxcblx0fSxcblx0e1xuXHRcdHR5cGU6IEZPUk1fRklFTERfRUxFTUVOVF9UWVBFLkRST1BET1dOLFxuXHRcdG5hbWU6IFwiQ2l0eVwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlNlbGVjdCB3aGVyZSBpdCB3YXMgc3BlbnRcIixcblx0XHRjbGFzc05hbWU6IFwiY2l0eVwiLFxuXHRcdGNvbnRlbnQ6IHt9LFxuXHRcdG9wdGlvbnM6IHsgZXhwcmVzc2lvbjogXCJ7eyUlZXhwZW5zZXMtZGljdGlvbmFyeS5tZCUlLmNpdHl9fVwiIH0sXG5cdH0sXG5cdHtcblx0XHR0eXBlOiBGT1JNX0ZJRUxEX0VMRU1FTlRfVFlQRS5URVhULFxuXHRcdG5hbWU6IFwiRGVzY3JpcHRpb25cIixcblx0XHRkZXNjcmlwdGlvbjogJ0VudGVyIGV4cGVuc2UgZGVzY3JpcHRpb24nLFxuXHRcdHBsYWNlaG9sZGVyOiBcIkV4cGVuc2UgZGVzY3JpcHRpb25cIixcblx0XHRjbGFzc05hbWU6IFwiZGVzY3JpcHRpb25cIixcblx0XHRjb250ZW50OiB7fSxcblx0fSxcblx0e1xuXHRcdHR5cGU6IEZPUk1fRklFTERfRUxFTUVOVF9UWVBFLlRFWFQsXG5cdFx0bmFtZTogXCJHcm91cGluZyBUYWdcIixcblx0XHRkZXNjcmlwdGlvbjogXCJBZGQgdGFnIHRvIHNlbWFudGljIGdyb3VwaW5nXCIsXG5cdFx0cGxhY2Vob2xkZXI6ICcjc2VtYW50aWNUYWcnLFxuXHRcdGNsYXNzTmFtZTogXCJncm91cGluZy10YWdcIixcblx0XHRjb250ZW50OiB7fSxcblx0fSxcbl07XG5cbmV4cG9ydCBjb25zdCBmb3JtRmllbGRFeGFtcGxlczogRm9ybUZpZWxkW10gPSBbXG5cdHtcblx0XHR0eXBlOiBGT1JNX0ZJRUxEX0VMRU1FTlRfVFlQRS5URVhULFxuXHRcdG5hbWU6IFwiRmllbGQgMDFcIixcblx0XHRkZXNjcmlwdGlvbjogXCJmaXJzdCBmaWVsZFwiLFxuXHRcdGNsYXNzTmFtZTogXCJmaWVsZDAxXCIsXG5cdFx0Y29udGVudDogeyBleHByZXNzaW9uOiBcInt7JSVleHBlbnNlcy8xNzE2MTU1NjE0NDU0Lm1kJSUuY2F0ZWdvcnl9fVwiIH0sXG5cdFx0Ly8gb3B0aW9uczogeyBhOiBcImFcIiwgYjogXCJiXCIgfSxcblx0fSxcblx0e1xuXHRcdHR5cGU6IEZPUk1fRklFTERfRUxFTUVOVF9UWVBFLlRFWFQsXG5cdFx0bmFtZTogXCJGaWVsZCAwMlwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcInNlY29uZCBmaWVsZFwiLFxuXHRcdGNsYXNzTmFtZTogXCJmaWVsZDAyXCIsXG5cdFx0Y29udGVudDoge1xuXHRcdFx0ZXhwcmVzc2lvbjpcblx0XHRcdFx0XCJ7eyUlZXhwZW5zZXMvMTcxNjE1NTYzMzgwNC5tZCUlLmNhdGVnb3J5ICsgJyAnICsgJCQuZmllbGQwMX19XCIsXG5cdFx0fSxcblx0fSxcblx0e1xuXHRcdHR5cGU6IEZPUk1fRklFTERfRUxFTUVOVF9UWVBFLlRFWFQsXG5cdFx0bmFtZTogXCJGaWVsZCAwM1wiLFxuXHRcdGRlc2NyaXB0aW9uOiBcInRoaXJkIGZpZWxkXCIsXG5cdFx0Y2xhc3NOYW1lOiBcImZpZWxkMDNcIixcblx0XHRjb250ZW50OiB7IGV4cHJlc3Npb246IFwie3skJC5maWVsZDAyfX1cIiB9LFxuXHR9LFxuXHR7XG5cdFx0dHlwZTogRk9STV9GSUVMRF9FTEVNRU5UX1RZUEUuTlVNQkVSLFxuXHRcdG5hbWU6IFwiRmllbGQgMDBcIixcblx0XHRkZXNjcmlwdGlvbjogXCJjb3N0IGZpZWxkXCIsXG5cdFx0Y2xhc3NOYW1lOiBcImNvc3RmaWVsZFwiLFxuXHRcdGNvbnRlbnQ6IHt9LFxuXHR9LFxuXHR7XG5cdFx0dHlwZTogRk9STV9GSUVMRF9FTEVNRU5UX1RZUEUuRFJPUERPV04sXG5cdFx0bmFtZTogXCJGaWVsZCAwNFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcImZvcnRoIGZpZWxkXCIsXG5cdFx0Y2xhc3NOYW1lOiBcImZpZWxkMDRcIixcblx0XHRjb250ZW50OiB7IGV4cHJlc3Npb246IFwie3skJC5maWVsZDAzfX1cIiB9LFxuXHRcdG9wdGlvbnM6IHsgdmFsdWU6IFtcImFcIiwgXCJiXCJdIH0sXG5cdH0sXG5cdHtcblx0XHR0eXBlOiBGT1JNX0ZJRUxEX0VMRU1FTlRfVFlQRS5EUk9QRE9XTixcblx0XHRuYW1lOiBcIkZpZWxkIDA1XCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiZmlmdGggZmllbGRcIixcblx0XHRjbGFzc05hbWU6IFwiZmllbGQwNVwiLFxuXHRcdGNvbnRlbnQ6IHsgZXhwcmVzc2lvbjogXCJ7eyQkLmZpZWxkMDJ9fVwiIH0sXG5cdFx0b3B0aW9uczoge1xuXHRcdFx0ZXhwcmVzc2lvbjpcblx0XHRcdFx0XCJ7e09iamVjdC52YWx1ZXMoJSVteSBwcm9wcy5tZCUlKS5tYXAoaSA9PiBpLnRvVXBwZXJDYXNlKCkpfX1cIixcblx0XHR9LFxuXHR9LFxuXTtcbiIsICJpbXBvcnQge1xuXHREcm9wZG93bkZvcm1GaWVsZCxcblx0Rk9STV9GSUVMRF9FTEVNRU5UX1RZUEUsXG5cdEZPUk1fRklFTERfU1RBVEUsXG5cdEZvcm1GaWVsZCxcbn0gZnJvbSBcImZvcm1cIjtcbmltcG9ydCB7IEFwcCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1xuXHRmcm9tQXJyYXlUb1JlY29yZCxcblx0Z2V0Q2xhc3NOYW1lc0Zyb21FeHByZXNzaW9uLFxuXHRnZXRGaWxlUGF0aHNGcm9tRXhwcmVzc2lvbixcbn0gZnJvbSBcInV0aWxzXCI7XG5cbmFic3RyYWN0IGNsYXNzIEZvcm1GaWVsZEZhY3Rvcnkge1xuXHRwdWJsaWMgcmVhZG9ubHkgZm9ybUZpZWxkOiBGb3JtRmllbGQ7XG5cdHByb3RlY3RlZCByZWFkb25seSBjb250ZW50RWw6IEhUTUxFbGVtZW50O1xuXHRwcm90ZWN0ZWQgcmVhZG9ubHkgYXBwOiBBcHA7XG5cblx0cHJvdGVjdGVkIHJlYWRvbmx5IGV4cHJlc3Npb25Db250ZXh0PzogRm9ybUZpZWxkRmFjdG9yeVtdO1xuXHRwcm90ZWN0ZWQgZGVwZW5kZW50RmllbGRzOiBGb3JtRmllbGRGYWN0b3J5W107XG5cblx0Y29uc3RydWN0b3IocGFyYW1zOiB7XG5cdFx0Y29udGVudEVsOiBIVE1MRWxlbWVudDtcblx0XHRhcHA6IEFwcDtcblx0XHRmb3JtRmllbGQ6IEZvcm1GaWVsZDtcblx0XHRleHByZXNzaW9uQ29udGV4dD86IEZvcm1GaWVsZEZhY3RvcnlbXTtcblx0fSkge1xuXHRcdHRoaXMuY29udGVudEVsID0gcGFyYW1zLmNvbnRlbnRFbDtcblx0XHR0aGlzLmFwcCA9IHBhcmFtcy5hcHA7XG5cdFx0dGhpcy5mb3JtRmllbGQgPSBwYXJhbXMuZm9ybUZpZWxkO1xuXHRcdHRoaXMuZXhwcmVzc2lvbkNvbnRleHQgPSBwYXJhbXM/LmV4cHJlc3Npb25Db250ZXh0O1xuXG5cdFx0dGhpcy5mb3JtRmllbGQuc3RhdGUgPSBGT1JNX0ZJRUxEX1NUQVRFLkNSRUFURUQ7XG5cdH1cblxuXHRwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0U2V0dGluZygpOiBTZXR0aW5nO1xuXG5cdGFic3RyYWN0IHNldCB2YWx1ZSh2YWx1ZVRvU2V0OiBzdHJpbmcpO1xuXG5cdHNldCBkZXBlbmRlbnRzKGRlcGVuZGVudHM6IEZvcm1GaWVsZEZhY3RvcnlbXSkge1xuXHRcdHRoaXMuZGVwZW5kZW50RmllbGRzID0gZGVwZW5kZW50cztcblx0fVxuXG5cdHB1YmxpYyBhc3luYyBpbml0aWFsaXNlRm9ybUZpZWxkKFxuXHRcdGRlcGVuZGVudHM6IEZvcm1GaWVsZEZhY3RvcnlbXVxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0aGlzLmZvcm1GaWVsZC5zZXR0aW5nID0gdGhpcy5nZXRTZXR0aW5nKCk7XG5cdFx0YXdhaXQgdGhpcy5hc3NpZ25EZWZhdWx0VmFsdWUoKTtcblxuXHRcdHRoaXMuZGVwZW5kZW50cyA9IGRlcGVuZGVudHM7XG5cdFx0dGhpcy5mb3JtRmllbGQuc3RhdGUgPSBGT1JNX0ZJRUxEX1NUQVRFLklOSVRJQUxJWkVEO1xuXHR9XG5cblx0cHJvdGVjdGVkIGFzeW5jIGFzc2lnbkRlZmF1bHRWYWx1ZSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLmFzc2lnblZhbHVlKCk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgYXN5bmMgdXBkYXRlRmllbGQoXG5cdFx0dmFsdWU/OiBzdHJpbmcsXG5cdFx0dXBkYXRlZEJ5Pzogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdG5ldyBOb3RpY2UoYCR7dGhpcy5mb3JtRmllbGQuY2xhc3NOYW1lfSBjaGFuZ2VkOiAke3ZhbHVlfWApO1xuXG5cdFx0YXdhaXQgdGhpcy5hc3NpZ25WYWx1ZSh2YWx1ZSwgdXBkYXRlZEJ5KTtcblxuXHRcdGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdFx0dGhpcy5kZXBlbmRlbnRGaWVsZHM/Lm1hcCgoZGVwZW5kZW50KSA9PlxuXHRcdFx0XHRkZXBlbmRlbnQudXBkYXRlRmllbGQodW5kZWZpbmVkLCB0aGlzLmZvcm1GaWVsZC5jbGFzc05hbWUpXG5cdFx0XHQpXG5cdFx0KTtcblx0fVxuXG5cdHByb3RlY3RlZCBhc3luYyBhc3NpZ25WYWx1ZShcblx0XHR2YWx1ZT86IHN0cmluZyxcblx0XHR1cGRhdGVkQnk/OiBzdHJpbmdcblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgdmFsdWVUb0Fzc2luZyA9IHZhbHVlXG5cdFx0XHQ/IHZhbHVlXG5cdFx0XHQ6IGF3YWl0IHRoaXMuZXZhbHVhdGVFeHByZXNzaW9uKFxuXHRcdFx0XHRcdHRoaXMuZm9ybUZpZWxkLmNvbnRlbnQ/LmV4cHJlc3Npb24sXG5cdFx0XHRcdFx0dGhpcy5leHByZXNzaW9uQ29udGV4dFxuXHRcdFx0ICApO1xuXG5cdFx0aWYgKHZhbHVlVG9Bc3NpbmcgPT09IHRoaXMuZm9ybUZpZWxkLmNvbnRlbnQudmFsdWUpIHJldHVybjtcblxuXHRcdHRoaXMudmFsdWUgPSB2YWx1ZVRvQXNzaW5nO1xuXHR9XG5cblx0cHJvdGVjdGVkIGFzc2lnbkZvcm1GaWVsZEF0dHJpYnV0ZXMoc2V0dGluZzogU2V0dGluZyk6IHZvaWQge1xuXHRcdGNvbnN0IGh0bWxFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXG5cdFx0XHR0aGlzLmdldEZvcm1GaWVsZEh0bWxQYXRoKClcblx0XHQpO1xuXG5cdFx0aHRtbEVsPy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIHRoaXMuZm9ybUZpZWxkLnR5cGUpO1xuXG5cdFx0aWYgKHRoaXMuZm9ybUZpZWxkLnBsYWNlaG9sZGVyKVxuXHRcdFx0aHRtbEVsPy5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCB0aGlzLmZvcm1GaWVsZD8ucGxhY2Vob2xkZXIpO1xuXG5cdFx0aWYgKHRoaXMuZm9ybUZpZWxkLmRlc2NyaXB0aW9uKVxuXHRcdFx0c2V0dGluZy5zZXREZXNjKHRoaXMuZm9ybUZpZWxkLmRlc2NyaXB0aW9uKTtcblx0fVxuXG5cdHByb3RlY3RlZCBnZXRGb3JtRmllbGRIdG1sUGF0aChmb3JtRmllbGQgPSB0aGlzLmZvcm1GaWVsZCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGBkaXYuJHtmb3JtRmllbGQuY2xhc3NOYW1lfSA+IGRpdi5zZXR0aW5nLWl0ZW0tY29udHJvbCA+IGlucHV0YDtcblx0fVxuXG5cdHByb3RlY3RlZCBhc3luYyBldmFsdWF0ZUV4cHJlc3Npb24oXG5cdFx0ZXhwcmVzc2lvbj86IHN0cmluZyxcblx0XHRleHByZXNzaW9uQ29udGV4dD86IEZvcm1GaWVsZEZhY3RvcnlbXVxuXHQpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGlmICghdGhpcy5mb3JtRmllbGQuY29udGVudC5leHByZXNzaW9uKSByZXR1cm4gXCJcIjtcblxuXHRcdGNvbnN0IFtwcmVmaXgsIGV4cHJlc3Npb25Ub0V2YWx1YXRlLCBzdWZpeF0gPSBleHByZXNzaW9uXG5cdFx0XHQ/IHRoaXMuc3BsaXRFeHByZXNzaW9uKGV4cHJlc3Npb24pXG5cdFx0XHQ6IFtcIlwiLCBcIlwiLCBcIlwiXTtcblxuXHRcdGlmICghZXhwcmVzc2lvblRvRXZhbHVhdGUpIHJldHVybiBwcmVmaXg7XG5cblx0XHRjb25zdCBwYXJzZWRFeHByZXNzaW9uID0gYXdhaXQgdGhpcy5wYXJzZUV4cHJlc3Npb25Db250ZXh0KFxuXHRcdFx0ZXhwcmVzc2lvblRvRXZhbHVhdGUsXG5cdFx0XHRleHByZXNzaW9uQ29udGV4dFxuXHRcdCk7XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZXhwcmVzc2lvblJlc3VsdCA9IG5ldyBGdW5jdGlvbihcblx0XHRcdFx0YHJldHVybiAke3BhcnNlZEV4cHJlc3Npb259O2Bcblx0XHRcdCkoKTtcblxuXHRcdFx0cmV0dXJuIGAke3ByZWZpeH0ke2V4cHJlc3Npb25SZXN1bHR9JHtzdWZpeCA/PyBcIlwifWA7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdG5ldyBOb3RpY2UoXG5cdFx0XHRcdGBFcnJvciBvbiBldmFsdWF0aW5nICR7dGhpcy5mb3JtRmllbGQuY2xhc3NOYW1lfSBleHByZXNzaW9uYFxuXHRcdFx0KTtcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG5cdFx0XHRyZXR1cm4gYCR7cHJlZml4fSR7c3VmaXggPz8gXCJcIn1gO1xuXHRcdH1cblx0fVxuXG5cdHByb3RlY3RlZCBzcGxpdEV4cHJlc3Npb24oZXhwcmVzc2lvbjogc3RyaW5nKTogc3RyaW5nW10ge1xuXHRcdGlmICghKGV4cHJlc3Npb24uaW5jbHVkZXMoXCJ7e1wiKSAmJiBleHByZXNzaW9uLmluY2x1ZGVzKFwifX1cIikpKVxuXHRcdFx0cmV0dXJuIFtleHByZXNzaW9uXTtcblxuXHRcdGNvbnN0IGV4cHJlc3Npb25NYXRjaGVyID0gbmV3IFJlZ0V4cCgve3soLiopfX0vKTtcblxuXHRcdGNvbnN0IGV4cHJlc3Npb25Ub0V2YWx1YXRlID0gZXhwcmVzc2lvbk1hdGNoZXIuZXhlYyhleHByZXNzaW9uKT8uYXQoMCk7XG5cblx0XHRjb25zdCBwcmVmaXggPSBleHByZXNzaW9uLnNwbGl0KFwie3tcIilbMF07XG5cdFx0Y29uc3Qgc3VmaXggPSBleHByZXNzaW9uLnNwbGl0KFwifX1cIilbMV07XG5cblx0XHRyZXR1cm4gW3ByZWZpeCwgZXhwcmVzc2lvblRvRXZhbHVhdGUgPz8gXCJcIiwgc3VmaXhdO1xuXHR9XG5cblx0cHJvdGVjdGVkIGFzeW5jIHBhcnNlRXhwcmVzc2lvbkNvbnRleHQoXG5cdFx0ZXhwcmVzc2lvbjogc3RyaW5nLFxuXHRcdGV4cHJlc3Npb25Db250ZXh0PzogRm9ybUZpZWxkRmFjdG9yeVtdXG5cdCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0Y29uc3QgZm9ybUZpZWxkQ2xhc3NOYW1lcyA9IGdldENsYXNzTmFtZXNGcm9tRXhwcmVzc2lvbihleHByZXNzaW9uKTtcblxuXHRcdGZvcm1GaWVsZENsYXNzTmFtZXMuZm9yRWFjaCgoZm9ybUZpZWxkQ2xhc3NOYW1lKSA9PiB7XG5cdFx0XHRjb25zdCBmb3JtRmllbGQgPSBleHByZXNzaW9uQ29udGV4dD8uZmluZChcblx0XHRcdFx0KGZvcm1GaWVsZCkgPT5cblx0XHRcdFx0XHRmb3JtRmllbGQuZm9ybUZpZWxkLmNsYXNzTmFtZSA9PT0gZm9ybUZpZWxkQ2xhc3NOYW1lXG5cdFx0XHQpO1xuXG5cdFx0XHRjb25zdCBjbGFzc05hbWVNYXRjaGVyID0gbmV3IFJlZ0V4cChcblx0XHRcdFx0YFxcXFwkXFxcXCRcXFxcLiR7Zm9ybUZpZWxkPy5mb3JtRmllbGQuY2xhc3NOYW1lfWBcblx0XHRcdCk7XG5cblx0XHRcdGNvbnN0IGlzRmlsZVBhdGggPSBuZXcgUmVnRXhwKFxuXHRcdFx0XHRgJSUuKlxcXFwkXFxcXCRcXFxcLiR7Zm9ybUZpZWxkPy5mb3JtRmllbGQuY2xhc3NOYW1lfS4qJSVgLFxuXHRcdFx0XHRcImdcIlxuXHRcdFx0KTtcblxuXHRcdFx0Y29uc3QgdmFsdWVUZVJlcGxhY2UgPSBpc0ZpbGVQYXRoLnRlc3QoZXhwcmVzc2lvbilcblx0XHRcdFx0PyBgJHtmb3JtRmllbGQ/LmZvcm1GaWVsZD8uY29udGVudD8udmFsdWUgPz8gXCJcIn1gXG5cdFx0XHRcdDogYCcke2Zvcm1GaWVsZD8uZm9ybUZpZWxkPy5jb250ZW50Py52YWx1ZSA/PyBcIlwifSdgO1xuXG5cdFx0XHRleHByZXNzaW9uID0gZXhwcmVzc2lvbi5yZXBsYWNlKGNsYXNzTmFtZU1hdGNoZXIsIHZhbHVlVGVSZXBsYWNlKTtcblx0XHR9KTtcblxuXHRcdGNvbnN0IGZpbGVQYXRocyA9IGdldEZpbGVQYXRoc0Zyb21FeHByZXNzaW9uKGV4cHJlc3Npb24pO1xuXG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0XHRmaWxlUGF0aHMubWFwKGFzeW5jIChmaWxlUGF0aCkgPT4ge1xuXHRcdFx0XHRjb25zdCBmaWxlUGF0aE1hdGNoZXIgPSBuZXcgUmVnRXhwKGAlJSR7ZmlsZVBhdGh9JSVgKTtcblxuXHRcdFx0XHRjb25zdCBbXywgZmlsZUV4dGVuc2lvbl0gPSBmaWxlUGF0aC5zcGxpdChcIi5cIik7XG5cblx0XHRcdFx0aWYgKGZpbGVFeHRlbnNpb24gIT09IFwibWRcIikge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXG5cdFx0XHRcdFx0XHRgQ2FuJ3QgaGFuZGxlIC4ke2ZpbGVFeHRlbnNpb259IGV4dGVuc2lvbiwgLm1kIGV4cGVjdGVkYFxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRleHByZXNzaW9uID0gZXhwcmVzc2lvbi5yZXBsYWNlKGZpbGVQYXRoTWF0Y2hlciwgXCJcIik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cblx0XHRcdFx0aWYgKCFmaWxlKSByZXR1cm47XG5cblx0XHRcdFx0bGV0IGZpbGVGcm9udE1hdHRlciA9IFwiXCI7XG5cdFx0XHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihcblx0XHRcdFx0XHRmaWxlLFxuXHRcdFx0XHRcdChmcm9udG1hdHRlcikgPT4gKGZpbGVGcm9udE1hdHRlciA9IGZyb250bWF0dGVyKVxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGV4cHJlc3Npb24gPSBleHByZXNzaW9uLnJlcGxhY2UoXG5cdFx0XHRcdFx0ZmlsZVBhdGhNYXRjaGVyLFxuXHRcdFx0XHRcdEpTT04uc3RyaW5naWZ5KGZpbGVGcm9udE1hdHRlcilcblx0XHRcdFx0KTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdGNvbnN0IGV4cHJlc3Npb25Db250ZW50TWF0Y2hlciA9IG5ldyBSZWdFeHAoL3t7KC4qKX19Lyk7XG5cblx0XHRyZXR1cm4gZXhwcmVzc2lvbkNvbnRlbnRNYXRjaGVyLmV4ZWMoZXhwcmVzc2lvbik/LmF0KC0xKSA/PyBcIlwiO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBUZXh0Rm9ybUZpZWxkRmFjdG9yeSBleHRlbmRzIEZvcm1GaWVsZEZhY3Rvcnkge1xuXHRjb25zdHJ1Y3RvcihwYXJhbXM6IHtcblx0XHRjb250ZW50RWw6IEhUTUxFbGVtZW50O1xuXHRcdGFwcDogQXBwO1xuXHRcdGZvcm1GaWVsZDogRm9ybUZpZWxkO1xuXHRcdGV4cHJlc3Npb25Db250ZXh0OiBGb3JtRmllbGRGYWN0b3J5W107XG5cdH0pIHtcblx0XHRzdXBlcihwYXJhbXMpO1xuXHR9XG5cblx0cHJvdGVjdGVkIGdldFNldHRpbmcoKTogU2V0dGluZyB7XG5cdFx0Y29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUodGhpcy5mb3JtRmllbGQubmFtZSlcblx0XHRcdC5zZXRDbGFzcyh0aGlzLmZvcm1GaWVsZC5jbGFzc05hbWUpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4gdGV4dC5vbkNoYW5nZSh0aGlzLnVwZGF0ZUZpZWxkLmJpbmQodGhpcykpKTtcblxuXHRcdHRoaXMuYXNzaWduRm9ybUZpZWxkQXR0cmlidXRlcyhzZXR0aW5nKTtcblxuXHRcdHJldHVybiBzZXR0aW5nO1xuXHR9XG5cblx0c2V0IHZhbHVlKHZhbHVlVG9TZXQ6IHN0cmluZykge1xuXHRcdGNvbnN0IGZpZWxkRWwgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0dGhpcy5nZXRGb3JtRmllbGRIdG1sUGF0aCgpXG5cdFx0KTtcblx0XHRpZiAoZmllbGRFbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcblx0XHRcdGZpZWxkRWwudmFsdWUgPSB2YWx1ZVRvU2V0O1xuXHRcdFx0dGhpcy5mb3JtRmllbGQuY29udGVudFtcInZhbHVlXCJdID0gdmFsdWVUb1NldDtcblx0XHR9IGVsc2Vcblx0XHRcdG5ldyBOb3RpY2UoXG5cdFx0XHRcdGBDYW4ndCBmaW5kIGZpZWxkIGVsZW1lbnQ6ICR7dGhpcy5nZXRGb3JtRmllbGRIdG1sUGF0aCgpfWBcblx0XHRcdCk7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFRpbWVGb3JtRmllbGRGYWN0b3J5IGV4dGVuZHMgVGV4dEZvcm1GaWVsZEZhY3Rvcnkge1xuXHRwcm90ZWN0ZWQgYXN5bmMgYXNzaWduVmFsdWUoXG5cdFx0dmFsdWU/OiBzdHJpbmcsXG5cdFx0dXBkYXRlZEJ5Pzogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGxldCB2YWx1ZVRvQXNzaW5nID0gdmFsdWVcblx0XHRcdD8gdmFsdWVcblx0XHRcdDogYXdhaXQgdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oXG5cdFx0XHRcdFx0dGhpcy5mb3JtRmllbGQuY29udGVudD8uZXhwcmVzc2lvbixcblx0XHRcdFx0XHR0aGlzLmV4cHJlc3Npb25Db250ZXh0XG5cdFx0XHQgICk7XG5cblx0XHRsZXQgW2hvdXIsIG1pbnV0ZV0gPSB2YWx1ZVRvQXNzaW5nLnNwbGl0KFwiOlwiKTtcblxuXHRcdGlmICghaG91ciB8fCAhbWludXRlKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBVbmV4cGVjdGVkIGZvcm1hdCBmb3IgdGltZSBmaWVsZC4gRXhwZWN0ZWQgaXMgSEg6bW1gKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRob3VyID0gaG91ci5sZW5ndGggPT09IDIgPyBob3VyIDogYDAke2hvdXJ9YDtcblx0XHRtaW51dGUgPSBtaW51dGUubGVuZ3RoID09PSAyID8gbWludXRlIDogYDAke21pbnV0ZX1gO1xuXG5cdFx0dmFsdWVUb0Fzc2luZyA9IGAke2hvdXJ9OiR7bWludXRlfWA7XG5cblx0XHRpZiAodmFsdWVUb0Fzc2luZyA9PT0gdGhpcy5mb3JtRmllbGQuY29udGVudC52YWx1ZSkgcmV0dXJuO1xuXG5cdFx0dGhpcy52YWx1ZSA9IHZhbHVlVG9Bc3Npbmc7XG5cdH1cbn1cbmV4cG9ydCBjbGFzcyBEcm9wZG93bkZvcm1GaWVsZEZhY3RvcnkgZXh0ZW5kcyBGb3JtRmllbGRGYWN0b3J5IHtcblx0Zm9ybUZpZWxkOiBEcm9wZG93bkZvcm1GaWVsZDtcblx0b3B0aW9uRXhwcmVzc2lvbkNvbnRleHQ/OiBGb3JtRmllbGRGYWN0b3J5W107XG5cdGNvbnN0cnVjdG9yKHBhcmFtczoge1xuXHRcdGNvbnRlbnRFbDogSFRNTEVsZW1lbnQ7XG5cdFx0YXBwOiBBcHA7XG5cdFx0Zm9ybUZpZWxkOiBGb3JtRmllbGQ7XG5cdFx0ZXhwcmVzc2lvbkNvbnRleHQ6IEZvcm1GaWVsZEZhY3RvcnlbXTtcblx0XHRvcHRpb25FeHByZXNzaW9uQ29udGV4dD86IEZvcm1GaWVsZEZhY3RvcnlbXTtcblx0fSkge1xuXHRcdHN1cGVyKHBhcmFtcyk7XG5cdFx0dGhpcy5vcHRpb25FeHByZXNzaW9uQ29udGV4dCA9IHBhcmFtcy5vcHRpb25FeHByZXNzaW9uQ29udGV4dDtcblx0fVxuXG5cdHByb3RlY3RlZCBnZXRTZXR0aW5nKCk6IFNldHRpbmcge1xuXHRcdGNvbnN0IG9wdGlvbnMgPSBmcm9tQXJyYXlUb1JlY29yZCh0aGlzLmZvcm1GaWVsZC5vcHRpb25zLnZhbHVlKTtcblx0XHRjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZSh0aGlzLmZvcm1GaWVsZC5uYW1lKVxuXHRcdFx0LnNldENsYXNzKHRoaXMuZm9ybUZpZWxkLmNsYXNzTmFtZSlcblx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XG5cdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0LmFkZE9wdGlvbnMob3B0aW9ucylcblx0XHRcdFx0XHQub25DaGFuZ2UodGhpcy51cGRhdGVGaWVsZC5iaW5kKHRoaXMpKVxuXHRcdFx0KTtcblxuXHRcdHRoaXMuYXNzaWduRm9ybUZpZWxkQXR0cmlidXRlcyhzZXR0aW5nKTtcblxuXHRcdHJldHVybiBzZXR0aW5nO1xuXHR9XG5cblx0c2V0IHZhbHVlKHZhbHVlVG9TZXQ6IHN0cmluZykge1xuXHRcdGNvbnN0IGZpZWxkRWwgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0dGhpcy5nZXRGb3JtRmllbGRIdG1sUGF0aCgpXG5cdFx0KTtcblxuXHRcdGlmIChmaWVsZEVsIGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQpIHtcblx0XHRcdGZpZWxkRWwudmFsdWUgPSB2YWx1ZVRvU2V0O1xuXHRcdFx0dGhpcy5mb3JtRmllbGQuY29udGVudFtcInZhbHVlXCJdID0gdmFsdWVUb1NldDtcblx0XHR9IGVsc2Vcblx0XHRcdG5ldyBOb3RpY2UoXG5cdFx0XHRcdGBDYW4ndCBmaW5kIGZpZWxkIGVsZW1lbnQ6ICR7dGhpcy5nZXRGb3JtRmllbGRIdG1sUGF0aCgpfWBcblx0XHRcdCk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgZ2V0Rm9ybUZpZWxkSHRtbFBhdGgoZm9ybUZpZWxkID0gdGhpcy5mb3JtRmllbGQpOiBzdHJpbmcge1xuXHRcdHJldHVybiBgZGl2LiR7Zm9ybUZpZWxkLmNsYXNzTmFtZX0gPiBkaXYuc2V0dGluZy1pdGVtLWNvbnRyb2wgPiBzZWxlY3RgO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyByZXNvbHZlRHJvcGRvd25PcHRpb25zKFxuXHRcdHVwZGF0ZWRCeTogc3RyaW5nID0gdGhpcy5mb3JtRmllbGQuY2xhc3NOYW1lXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGV4cHJlc3Npb25Ub0V2YWx1YXRlID0gdGhpcy5mb3JtRmllbGQub3B0aW9ucz8uZXhwcmVzc2lvbjtcblxuXHRcdGlmIChcblx0XHRcdCFleHByZXNzaW9uVG9FdmFsdWF0ZSB8fFxuXHRcdFx0KHRoaXMuZm9ybUZpZWxkLnN0YXRlID09PSBGT1JNX0ZJRUxEX1NUQVRFLklOSVRJQUxJWkVEICYmXG5cdFx0XHRcdCFleHByZXNzaW9uVG9FdmFsdWF0ZS5pbmNsdWRlcyh1cGRhdGVkQnkpKVxuXHRcdClcblx0XHRcdHJldHVybjtcblxuXHRcdGNvbnN0IHBhcnNlZEV4cHJlc3Npb24gPSBhd2FpdCB0aGlzLnBhcnNlRXhwcmVzc2lvbkNvbnRleHQoXG5cdFx0XHRleHByZXNzaW9uVG9FdmFsdWF0ZSxcblx0XHRcdHRoaXMub3B0aW9uRXhwcmVzc2lvbkNvbnRleHRcblx0XHQpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IG5ld09wdGlvbnM6IHN0cmluZ1tdID0gbmV3IEZ1bmN0aW9uKFxuXHRcdFx0XHRgcmV0dXJuICR7cGFyc2VkRXhwcmVzc2lvbn07YFxuXHRcdFx0KSgpO1xuXG5cdFx0XHR0aGlzLmFkZE5ld09wdGlvbnMuYmluZCh0aGlzKShuZXdPcHRpb25zLCB1cGRhdGVkQnksIGZhbHNlLCB0cnVlKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0bmV3IE5vdGljZShcblx0XHRcdFx0YGVycm9yIG9uIGV2YWx1YXRpbmcgJHt0aGlzLmZvcm1GaWVsZC5jbGFzc05hbWV9IG9wdGlvbiBleHByZXNzaW9uYFxuXHRcdFx0KTtcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdH1cblx0fVxuXG5cdHByb3RlY3RlZCBhc3luYyBhc3NpZ25WYWx1ZShcblx0XHR2YWx1ZT86IHN0cmluZyxcblx0XHR1cGRhdGVkQnk/OiBzdHJpbmdcblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXNvbHZlRHJvcGRvd25PcHRpb25zKHVwZGF0ZWRCeSk7XG5cblx0XHRjb25zdCB2YWx1ZVRvQXNzaW5nID0gdmFsdWVcblx0XHRcdD8gdmFsdWVcblx0XHRcdDogKGF3YWl0IHRoaXMuZXZhbHVhdGVFeHByZXNzaW9uKFxuXHRcdFx0XHRcdHRoaXMuZm9ybUZpZWxkLmNvbnRlbnQuZXhwcmVzc2lvbixcblx0XHRcdFx0XHR0aGlzLmV4cHJlc3Npb25Db250ZXh0XG5cdFx0XHQgICkpIHx8IE9iamVjdC52YWx1ZXModGhpcy5mb3JtRmllbGQub3B0aW9ucz8udmFsdWUgPz8ge30pWzBdO1xuXG5cdFx0aWYgKFxuXHRcdFx0dmFsdWVUb0Fzc2luZyA9PT0gdGhpcy5mb3JtRmllbGQuY29udGVudC52YWx1ZSB8fFxuXHRcdFx0dmFsdWVUb0Fzc2luZyA9PT0gXCJcIlxuXHRcdClcblx0XHRcdHJldHVybjtcblxuXHRcdGlmIChcblx0XHRcdHRoaXMuZm9ybUZpZWxkLm9wdGlvbnMudmFsdWUgJiZcblx0XHRcdCFPYmplY3QudmFsdWVzKHRoaXMuZm9ybUZpZWxkLm9wdGlvbnMudmFsdWUpLmluY2x1ZGVzKHZhbHVlVG9Bc3NpbmcpXG5cdFx0KVxuXHRcdFx0dGhpcy5hZGROZXdPcHRpb25zKFt2YWx1ZVRvQXNzaW5nXSwgdXBkYXRlZEJ5LCAhIXVwZGF0ZWRCeSk7XG5cblx0XHR0aGlzLnZhbHVlID0gdmFsdWVUb0Fzc2luZztcblx0fVxuXG5cdHByaXZhdGUgYWRkTmV3T3B0aW9ucyhcblx0XHRuZXdPcHRpb25zOiBzdHJpbmdbXSxcblx0XHR1cGRhdGVkQnk6IHN0cmluZyA9IHRoaXMuZm9ybUZpZWxkLmNsYXNzTmFtZSxcblx0XHRrZWVwT25seU9uZUJ5VXBkYXRlZEZpZWxkOiBib29sZWFuID0gdHJ1ZSxcblx0XHRyZW1vdmVPbGRPcHRpb25zOiBib29sZWFuID0gZmFsc2Vcblx0KTogdm9pZCB7XG5cdFx0aWYgKCFuZXdPcHRpb25zLmxlbmd0aCkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgZm9ybUZpZWxkSHRtbFBhdGggPSB0aGlzLmdldEZvcm1GaWVsZEh0bWxQYXRoKCk7XG5cdFx0Y29uc3QgZmllbGRFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXG5cdFx0XHR0aGlzLmdldEZvcm1GaWVsZEh0bWxQYXRoKClcblx0XHQpO1xuXG5cdFx0aWYgKCFmaWVsZEVsKSByZXR1cm47XG5cblx0XHRpZiAocmVtb3ZlT2xkT3B0aW9ucykge1xuXHRcdFx0ZmllbGRFbC5pbm5lckhUTUwgPSBcIlwiO1xuXG5cdFx0XHR0aGlzLmZvcm1GaWVsZC5vcHRpb25zLnZhbHVlID0gbmV3T3B0aW9ucztcblx0XHR9XG5cblx0XHRuZXdPcHRpb25zLmZvckVhY2goKG5ld09wdGlvbikgPT4ge1xuXHRcdFx0Y29uc3QgcG9zdEFkZGVkT3B0aW9uID0ga2VlcE9ubHlPbmVCeVVwZGF0ZWRGaWVsZFxuXHRcdFx0XHQ/IHRoaXMuY29udGVudEVsPy5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0XHRcdFx0YCR7Zm9ybUZpZWxkSHRtbFBhdGh9ID4gb3B0aW9uLiR7dXBkYXRlZEJ5fWBcblx0XHRcdFx0ICApXG5cdFx0XHRcdDogdW5kZWZpbmVkO1xuXG5cdFx0XHRpZiAocG9zdEFkZGVkT3B0aW9uICYmIGtlZXBPbmx5T25lQnlVcGRhdGVkRmllbGQpXG5cdFx0XHRcdGZpZWxkRWwucmVtb3ZlQ2hpbGQocG9zdEFkZGVkT3B0aW9uKTtcblxuXHRcdFx0ZmllbGRFbFxuXHRcdFx0XHQuY3JlYXRlRWwoXCJvcHRpb25cIiwge1xuXHRcdFx0XHRcdHZhbHVlOiBuZXdPcHRpb24sXG5cdFx0XHRcdFx0dGV4dDogbmV3T3B0aW9uLFxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuc2V0QXR0cihcImNsYXNzXCIsIHVwZGF0ZWRCeSk7XG5cblx0XHRcdHRoaXMuZm9ybUZpZWxkLm9wdGlvbnMudmFsdWUgPSB0aGlzLmZvcm1GaWVsZC5vcHRpb25zLnZhbHVlXG5cdFx0XHRcdD8gWy4uLnRoaXMuZm9ybUZpZWxkLm9wdGlvbnMudmFsdWUsIG5ld09wdGlvbl1cblx0XHRcdFx0OiBbbmV3T3B0aW9uXTtcblx0XHR9KTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgRm9ybSB7XG5cdHByaXZhdGUgY29udGVudEVsOiBIVE1MRWxlbWVudDtcblx0cHJpdmF0ZSBhcHA6IEFwcDtcblxuXHRwcml2YXRlIGZvcm1GaWVsZEZhY3RvcmllczogRm9ybUZpZWxkRmFjdG9yeVtdID0gW107XG5cdHByaXZhdGUgZm9ybUZpZWxkczogRm9ybUZpZWxkW107XG5cblx0Y29uc3RydWN0b3IoY29udGVudEVsOiBIVE1MRWxlbWVudCwgYXBwOiBBcHAsIGZvcm1GaWVsZHM6IEZvcm1GaWVsZFtdKSB7XG5cdFx0dGhpcy5jb250ZW50RWwgPSBjb250ZW50RWw7XG5cdFx0dGhpcy5hcHAgPSBhcHA7XG5cdFx0dGhpcy5mb3JtRmllbGRzID0gZm9ybUZpZWxkcztcblx0fVxuXG5cdHB1YmxpYyBhc3luYyBjcmVhdGVGb3JtRmllbGRzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMuZm9ybUZpZWxkcy5mb3JFYWNoKChmb3JtRmllbGQpID0+IHtcblx0XHRcdGlmIChmb3JtRmllbGQuc2V0dGluZykgZm9ybUZpZWxkLnNldHRpbmcuY2xlYXIoKTtcblxuXHRcdFx0Y29uc3QgZmFjdG9yeVBhcmFtcyA9IHtcblx0XHRcdFx0Zm9ybUZpZWxkLFxuXHRcdFx0XHRhcHA6IHRoaXMuYXBwLFxuXHRcdFx0XHRjb250ZW50RWw6IHRoaXMuY29udGVudEVsLFxuXHRcdFx0XHRleHByZXNzaW9uQ29udGV4dDogdGhpcy5nZXRFeHByZXNzaW9uQ29udGV4dChcblx0XHRcdFx0XHRmb3JtRmllbGQuY29udGVudD8uZXhwcmVzc2lvblxuXHRcdFx0XHQpLFxuXHRcdFx0fTtcblxuXHRcdFx0c3dpdGNoIChmb3JtRmllbGQudHlwZSkge1xuXHRcdFx0XHRjYXNlIEZPUk1fRklFTERfRUxFTUVOVF9UWVBFLlRFWFQ6XG5cdFx0XHRcdGNhc2UgRk9STV9GSUVMRF9FTEVNRU5UX1RZUEUuREFURTpcblx0XHRcdFx0Y2FzZSBGT1JNX0ZJRUxEX0VMRU1FTlRfVFlQRS5OVU1CRVI6XG5cdFx0XHRcdFx0dGhpcy5mb3JtRmllbGRGYWN0b3JpZXMucHVzaChcblx0XHRcdFx0XHRcdG5ldyBUZXh0Rm9ybUZpZWxkRmFjdG9yeShmYWN0b3J5UGFyYW1zKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgRk9STV9GSUVMRF9FTEVNRU5UX1RZUEUuVElNRTpcblx0XHRcdFx0XHR0aGlzLmZvcm1GaWVsZEZhY3Rvcmllcy5wdXNoKFxuXHRcdFx0XHRcdFx0bmV3IFRpbWVGb3JtRmllbGRGYWN0b3J5KGZhY3RvcnlQYXJhbXMpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBGT1JNX0ZJRUxEX0VMRU1FTlRfVFlQRS5EUk9QRE9XTjpcblx0XHRcdFx0XHR0aGlzLmZvcm1GaWVsZEZhY3Rvcmllcy5wdXNoKFxuXHRcdFx0XHRcdFx0bmV3IERyb3Bkb3duRm9ybUZpZWxkRmFjdG9yeSh7XG5cdFx0XHRcdFx0XHRcdG9wdGlvbkV4cHJlc3Npb25Db250ZXh0OiB0aGlzLmdldEV4cHJlc3Npb25Db250ZXh0KFxuXHRcdFx0XHRcdFx0XHRcdChmb3JtRmllbGQgYXMgRHJvcGRvd25Gb3JtRmllbGQpLm9wdGlvbnNcblx0XHRcdFx0XHRcdFx0XHRcdC5leHByZXNzaW9uXG5cdFx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHRcdC4uLmZhY3RvcnlQYXJhbXMsXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRmb3IgKGNvbnN0IGZhY3Rvcnkgb2YgdGhpcy5mb3JtRmllbGRGYWN0b3JpZXMpIHtcblx0XHRcdGF3YWl0IGZhY3RvcnkuaW5pdGlhbGlzZUZvcm1GaWVsZChcblx0XHRcdFx0dGhpcy5nZXREZXBlbmRlbnRGaWVsZHMoXG5cdFx0XHRcdFx0ZmFjdG9yeS5mb3JtRmllbGQuY2xhc3NOYW1lLFxuXHRcdFx0XHRcdHRoaXMuZm9ybUZpZWxkRmFjdG9yaWVzXG5cdFx0XHRcdClcblx0XHRcdCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBnZXREZXBlbmRlbnRGaWVsZHMoXG5cdFx0ZmllbGRDbGFzc05hbWU6IHN0cmluZyxcblx0XHRmb3JtRmllbGRGYWN0b3JpZXM6IEZvcm1GaWVsZEZhY3RvcnlbXVxuXHQpOiBGb3JtRmllbGRGYWN0b3J5W10ge1xuXHRcdHJldHVybiBmb3JtRmllbGRGYWN0b3JpZXMuZmlsdGVyKFxuXHRcdFx0KGZhY3RvcnkpID0+XG5cdFx0XHRcdGZhY3RvcnkuZm9ybUZpZWxkLmNvbnRlbnQ/LmV4cHJlc3Npb24/LmluY2x1ZGVzKFxuXHRcdFx0XHRcdGAkJC4ke2ZpZWxkQ2xhc3NOYW1lfWBcblx0XHRcdFx0KSB8fFxuXHRcdFx0XHQoXG5cdFx0XHRcdFx0ZmFjdG9yeS5mb3JtRmllbGQgYXMgRHJvcGRvd25Gb3JtRmllbGRcblx0XHRcdFx0KS5vcHRpb25zPy5leHByZXNzaW9uPy5pbmNsdWRlcyhgJCQuJHtmaWVsZENsYXNzTmFtZX1gKVxuXHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIGdldEV4cHJlc3Npb25Db250ZXh0KGV4cHJlc3Npb24/OiBzdHJpbmcpOiBGb3JtRmllbGRGYWN0b3J5W10ge1xuXHRcdGNvbnN0IGV4cHJlc3Npb25Db250ZXh0OiBGb3JtRmllbGRGYWN0b3J5W10gPSBbXTtcblxuXHRcdGlmICghZXhwcmVzc2lvbikgcmV0dXJuIGV4cHJlc3Npb25Db250ZXh0O1xuXG5cdFx0Y29uc3QgZm9ybUZpZWxkQ2xhc3NOYW1lcyA9IGdldENsYXNzTmFtZXNGcm9tRXhwcmVzc2lvbihleHByZXNzaW9uKTtcblxuXHRcdGZvcm1GaWVsZENsYXNzTmFtZXMuZm9yRWFjaCgoZm9ybUZpZWxkQ2xhc3NOYW1lKSA9PiB7XG5cdFx0XHRjb25zdCBwYXJ0aWFsQ29udGV4dCA9IHRoaXMuZm9ybUZpZWxkRmFjdG9yaWVzLmZpbmQoXG5cdFx0XHRcdChmb3JtRmllbGRGYWN0b3J5KSA9PlxuXHRcdFx0XHRcdGZvcm1GaWVsZEZhY3RvcnkuZm9ybUZpZWxkLmNsYXNzTmFtZSA9PT0gZm9ybUZpZWxkQ2xhc3NOYW1lXG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAocGFydGlhbENvbnRleHQpIGV4cHJlc3Npb25Db250ZXh0LnB1c2gocGFydGlhbENvbnRleHQpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGV4cHJlc3Npb25Db250ZXh0O1xuXHR9XG5cblx0cHVibGljIGdldERhdGFBc0Zyb250bWF0dGVyKCk6IHN0cmluZyB7XG5cdFx0bGV0IGZyb250bWF0dGVyU3RyaW5nID0gXCJcIjtcblx0XHR0aGlzLmZvcm1GaWVsZEZhY3Rvcmllcy5tYXAoKGZhY3RvcnkpID0+IHtcblx0XHRcdGNvbnN0IHN0cmluZ1ZhbHVlID1cblx0XHRcdFx0ZmFjdG9yeS5mb3JtRmllbGQudHlwZSA9PT0gRk9STV9GSUVMRF9FTEVNRU5UX1RZUEUuRFJPUERPV04gfHxcblx0XHRcdFx0ZmFjdG9yeS5mb3JtRmllbGQudHlwZSA9PT0gRk9STV9GSUVMRF9FTEVNRU5UX1RZUEUuVEVYVFxuXHRcdFx0XHRcdD8gYFwiJHtmYWN0b3J5LmZvcm1GaWVsZC5jb250ZW50Py52YWx1ZSA/PyBcIlwifVwiYFxuXHRcdFx0XHRcdDogZmFjdG9yeS5mb3JtRmllbGQuY29udGVudD8udmFsdWU7XG5cblx0XHRcdGZyb250bWF0dGVyU3RyaW5nICs9IGAke2ZhY3RvcnkuZm9ybUZpZWxkLmNsYXNzTmFtZX06ICR7c3RyaW5nVmFsdWV9XFxuYDtcblx0XHR9KTtcblxuXHRcdHJldHVybiBgLS0tXFxuJHtmcm9udG1hdHRlclN0cmluZ30tLS1gO1xuXHR9XG5cblx0cHVibGljIGdldFRpbWVzdGFtcE5hbWluZ1N0cmF0ZWd5KCk6IGFueSB7XG5cdFx0Y29uc3QgZGF0ZSA9IHRoaXMuZm9ybUZpZWxkRmFjdG9yaWVzLmZpbmQoXG5cdFx0XHQoZmFjdG9yeSkgPT4gZmFjdG9yeS5mb3JtRmllbGQuY2xhc3NOYW1lID09PSBcImRhdGVcIlxuXHRcdCk/LmZvcm1GaWVsZC5jb250ZW50LnZhbHVlO1xuXG5cdFx0Y29uc3QgdGltZSA9IHRoaXMuZm9ybUZpZWxkRmFjdG9yaWVzLmZpbmQoXG5cdFx0XHQoZmFjdG9yeSkgPT4gZmFjdG9yeS5mb3JtRmllbGQuY2xhc3NOYW1lID09PSBcInRpbWVcIlxuXHRcdCk/LmZvcm1GaWVsZC5jb250ZW50LnZhbHVlO1xuXG5cdFx0Y29uc3QgZXhwZW5zZVRpbWUgPSBuZXcgRGF0ZShgJHtkYXRlfSAke3RpbWV9YCkuZ2V0VGltZSgpO1xuXHRcdGNvbnN0IGN1cnJlbnRNaWxsaXNlY29uZHMgPSBuZXcgRGF0ZSgpLmdldE1pbGxpc2Vjb25kcygpO1xuXHRcdHJldHVybiBleHBlbnNlVGltZSArIGN1cnJlbnRNaWxsaXNlY29uZHM7XG5cdH1cblxuXHRwdWJsaWMgc2V0Rm9ybURhdGFOdWxsKCk6IHZvaWQge1xuXHRcdHRoaXMuZm9ybUZpZWxkRmFjdG9yaWVzLmZvckVhY2goXG5cdFx0XHQoZmFjdG9yeSkgPT4gKGZhY3RvcnkuZm9ybUZpZWxkLmNvbnRlbnQudmFsdWUgPSB1bmRlZmluZWQpXG5cdFx0KTtcblx0fVxufVxuIiwgImV4cG9ydCBmdW5jdGlvbiBnZXRDbGFzc05hbWVzRnJvbUV4cHJlc3Npb24oZXhwcmVzc2lvbjogc3RyaW5nKTogc3RyaW5nW10ge1xuXHRjb25zdCBjbGFzc05hbWVNYXRjaGVyID0gbmV3IFJlZ0V4cCgvXFwkXFwkXFwuKFswLTlhLXpBLVotXFwtXSspLywgXCJnXCIpO1xuXHRsZXQgbWF0Y2hlcyA9IHVuZGVmaW5lZDtcblx0Y29uc3QgZm9ybUZpZWxkQ2xhc3NOYW1lcyA9IFtdO1xuXG5cdHdoaWxlICgobWF0Y2hlcyA9IGNsYXNzTmFtZU1hdGNoZXIuZXhlYyhleHByZXNzaW9uKSkgIT09IG51bGwpXG5cdFx0Zm9ybUZpZWxkQ2xhc3NOYW1lcy5wdXNoKG1hdGNoZXNbMV0pO1xuXG5cdHJldHVybiBmb3JtRmllbGRDbGFzc05hbWVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZVBhdGhzRnJvbUV4cHJlc3Npb24oZXhwcmVzc2lvbjogc3RyaW5nKTogc3RyaW5nW10ge1xuXHRjb25zdCBmaWxlUGF0aE1hdGNoZXIgPSBuZXcgUmVnRXhwKC8lJShbXiUlXSopJSUvLCBcImdcIik7XG5cblx0bGV0IG1hdGNoZXMgPSB1bmRlZmluZWQ7XG5cdGNvbnN0IGZpbGVQYXRocyA9IFtdO1xuXG5cdHdoaWxlICgobWF0Y2hlcyA9IGZpbGVQYXRoTWF0Y2hlci5leGVjKGV4cHJlc3Npb24pKSAhPT0gbnVsbClcblx0XHRmaWxlUGF0aHMucHVzaChtYXRjaGVzWzFdKTtcblxuXHRyZXR1cm4gZmlsZVBhdGhzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbUFycmF5VG9SZWNvcmQoYXJyYXk/OiBzdHJpbmdbXSk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuXHRpZighYXJyYXkpIHJldHVybiB7fTtcblxuXHRjb25zdCByZWNvcmQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuXHRhcnJheS5tYXAoKGl0ZW0pID0+IHtcblx0XHRyZWNvcmRbaXRlbV0gPSBpdGVtO1xuXHR9KTtcblxuXHRyZXR1cm4gcmVjb3JkO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7O0FDMkRPLElBQU0sK0JBQTRDO0FBQUEsRUFDeEQ7QUFBQSxJQUNDLE1BQU07QUFBQSxJQUNOLE1BQU07QUFBQSxJQUNOLGFBQWE7QUFBQSxJQUNiLFdBQVc7QUFBQSxJQUNYLFNBQVMsRUFBRSxZQUFZLDZDQUE2QztBQUFBLEVBQ3JFO0FBQUEsRUFDQTtBQUFBLElBQ0MsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sYUFBYTtBQUFBLElBQ2IsV0FBVztBQUFBLElBQ1gsU0FBUztBQUFBLE1BQ1IsWUFDQztBQUFBLElBQ0Y7QUFBQSxFQUNEO0FBQUEsRUFDQTtBQUFBLElBQ0MsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sV0FBVztBQUFBLElBQ1gsYUFBYTtBQUFBLElBQ2Is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O0FBRUEsSUFBcUIsV0FBckIsY0FBc0Msd0JBQU87QUFBQSxFQUc1QyxNQUFNLFNBQVM7QUFDZCxVQUFNLEtBQUssYUFBYTtBQUN4QixVQUFNLEtBQUssYUFBYTtBQUd4QixVQUFNLGVBQWUsS0FBSztBQUFBLE1BQ3pCO0FBQUEsTUFDQTtBQUFBLE1BQ0EsQ0FBQyxRQUFvQjtBQUVwQixZQUFJLFlBQVksS0FBSyxLQUFLLDRCQUE0QixFQUFFLEtBQUs7QUFBQSxNQUM5RDtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQUEsRUFFQSxXQUFXO0FBQUEsRUFBQztBQUFBLEVBRVosTUFBTSxlQUFlO0FBQ3BCLFNBQUssV0FBVyxPQUFPO0FBQUEsTUFDdEIsQ0FBQztBQUFBLE1BQ0Q7QUFBQSxNQUNBLE1BQU0sS0FBSyxTQUFTO0FBQUEsSUFDckI7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsVUFBTSxLQUFLLFNBQVMsaUJBQWlCO0FBQUEsRUFDdEM7QUFDRDtBQUVBLElBQU0sY0FBTixjQUEwQix1QkFBTTtBQUFBLEVBSS9CLFlBQVksS0FBVSxZQUF5QjtBQUM5QyxVQUFNLEdBQUc7QUFFVCxTQUFLLE1BQU07QUFDWCxTQUFLLE9BQU8sSUFBSSxLQUFLLEtBQUssV0FBVyxLQUFLLEtBQUssVUFBVTtBQUFBLEVBQzFEO0FBQUEsRUFFQSxNQUFNLFNBQVM7QUFDZCxVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUVuRCxVQUFNLEtBQUssS0FBSyxpQkFBaUI7QUFFakMsUUFBSSx5QkFBUSxLQUFLLFNBQVMsRUFBRTtBQUFBLE1BQVUsQ0FBQyxXQUN0QyxPQUNFLGNBQWMsY0FBYyxFQUM1QixPQUFPLEVBQ1AsUUFBUSxNQUFNO0FBQ2QsY0FBTSxtQkFBbUIsS0FBSyxLQUFLLHFCQUFxQjtBQUN4RCxjQUFNLHFCQUFxQixLQUFLLEtBQUssMkJBQTJCO0FBQ2hFLGFBQUssTUFBTTtBQUVYLGFBQUssSUFBSSxNQUFNO0FBQUEsVUFDZCxZQUFZO0FBQUEsVUFDWjtBQUFBLFFBQ0Q7QUFBQSxNQUNELENBQUM7QUFBQSxJQUNIO0FBQUEsRUFDRDtBQUFBLEVBRUEsVUFBVTtBQUNULFNBQUssS0FBSyxnQkFBZ0I7QUFBQSxFQUMzQjtBQUNEOyIsCiAgIm5hbWVzIjogWyJfYSIsICJfYiIsICJmb3JtRmllbGQiLCAiaW1wb3J0X29ic2lkaWFuIl0KfQo=
